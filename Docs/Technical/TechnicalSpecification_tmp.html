<!DOCTYPE html>
<html>
<head>
<title>TechnicalSpecification.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<!-- PROJECT LOGO -->
<br>
<div align="center">
  <h1 align="center">Technical Specification</h1>
  <p align="center">
    <strong>EcoGo</strong>
    <br>
  </p>
</div>
<ul>
<li><a href="#1-introduction">1. Introduction</a>
<ul>
<li><a href="#11-audience">1.1. Audience</a></li>
<li><a href="#12-overview">1.2. Overview</a></li>
<li><a href="#13-glossary">1.3. Glossary</a></li>
<li><a href="#14-objectives">1.4. Objectives</a></li>
<li><a href="#15-scope">1.5. Scope</a></li>
</ul>
</li>
<li><a href="#2-requirements">2. Requirements</a>
<ul>
<li><a href="#21-functional-requirements">2.1. Functional Requirements</a></li>
<li><a href="#22-non-functional-requirements">2.2. Non-Functional Requirements</a></li>
<li><a href="#23-user-stories">2.3. User Stories</a></li>
</ul>
</li>
<li><a href="#3-technical-stack">3. Technical Stack</a>
<ul>
<li><a href="#31-front-end-technologies">3.1. Front-End Technologies</a></li>
<li><a href="#32-back-end-technologies">3.2. Back-End Technologies</a></li>
<li><a href="#33-apis">3.3 APIs</a></li>
</ul>
</li>
<li><a href="#4-system-architecture">4. System Architecture</a>
<ul>
<li><a href="#41-file-structure">4.1. File Structure</a></li>
<li><a href="#42-file-and-directory-purposes">4.2. File and Directory Purposes</a></li>
<li><a href="#43-step-by-step-project-setup-and-development">4.3. Step-by-Step Project Setup and Development</a>
<ul>
<li><a href="#431-create-the-project">4.3.1 Create the Project</a></li>
<li><a href="#432-install-npm-and-set-up-typescript">4.3.2. Install npm and Set Up TypeScript</a></li>
<li><a href="#433-front-end">4.3.3. Front End</a></li>
<li><a href="#434-authentication-and-user-management">4.3.4 Authentication and User Management</a>
<ul>
<li><a href="#-authentication-context-authcontexttsx">➭ Authentication Context (<code>AuthContext.tsx</code>)</a></li>
<li><a href="#-sign-in-page-signintsx">➭ Sign-In Page (<code>SignIn.tsx</code>)</a></li>
<li><a href="#-sign-up-component-signuptsx">➭ Sign-Up Component (<code>SignUp.tsx</code>)</a></li>
</ul>
</li>
<li><a href="#435-gps-navigation-and-transportation-mode-selection">4.3.5 GPS Navigation and Transportation Mode Selection</a>
<ul>
<li><a href="#-install-react-native-maps">➭ Install <code>react-native-maps</code></a></li>
<li><a href="#-google-maps-api-setup">➭ Google Maps API Setup</a></li>
<li><a href="#display-the-map">➭Display the Map</a></li>
<li><a href="#-fetch-user-location">➭ Fetch User Location</a></li>
<li><a href="#-get-destination-input">➭ Get Destination Input</a></li>
</ul>
</li>
<li><a href="#6-route-calculation-and-navigation">6. <strong>Route Calculation and Navigation</strong></a></li>
<li><a href="#7-real-time-navigation-and-instructions">7. <strong>Real-Time Navigation and Instructions</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-introduction">1. Introduction</h2>
<h3 id="11-audience">1.1. Audience</h3>
<p>This document is primarily intended for:</p>
<ul>
<li>Software developer: to understand the user and technical requirements, and to guide decision-making and planning. Help them understand risks and challenges, customer requirements, additional technical requirements and choices made.</li>
</ul>
<p>Secondary audiences:</p>
<ul>
<li>
<p>Program manager: to validate against the functional specification and the client's expectations.</p>
</li>
<li>
<p>QA: to assist in preparing the Test Plan and to use it for validating issues.</p>
</li>
<li>
<p>Project manager: to help identify risks and dependencies</p>
</li>
</ul>
<h3 id="12-overview">1.2. Overview</h3>
<p>EcoGo is a mobile application designed to help individuals track and reduce their carbon dioxide (CO2) emissions from everyday activities, particularly focusing on transportation. The app aims to provide users with real-time data on their emissions and incentivize eco-friendly behaviors through gamification and rewards.</p>
<h3 id="13-glossary">1.3. Glossary</h3>
<table>
<thead>
<tr>
<th>Term</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>Firebase</td>
<td>A mobile and web application development platform developed by Firebase, Inc. in 2011, then acquired by Google in 2014.</td>
</tr>
</tbody>
</table>
<h3 id="14-objectives">1.4. Objectives</h3>
<p><strong>Carbon Footprint Tracking</strong>
Users can track their carbon emissions from various transportation modes, including walking, cycling, public transport, and driving.</p>
<p><strong>Real-time Emission Calculation</strong>
The app calculates carbon emissions in real-time based on GPS data, distance traveled, and transportation mode.</p>
<p><strong>GPS Navigation and Transportation Mode Selection</strong>
Users can utilize GPS within the app to select a destination, choose their preferred mode of transportation, and receive guided directions to reach their destination.</p>
<p><strong>Graphical Representation</strong>
Users can visualize their carbon footprint over time through interactive graphs, providing insights into their environmental impact.</p>
<p>As mentioned in the <a href="../Functional/FunctionalSpecification.md">functional specification</a>, the following features will be implemented in a future version of the app as they are not considered essential for the initial release:</p>
<ul>
<li>Gamification: EcoGo will make carbon footprint tracking playful by rewarding users with virtual coins when they reduce their emissions, but this feature will be deferred to a later version.</li>
<li>In-App Store: The ability for users to redeem coins for discounts and offers on eco-friendly products, carpooling services, and public transportation.</li>
<li>Multi-language Support: EcoGo will initially support English, with plans to add additional languages in future releases.</li>
</ul>
<h3 id="15-scope">1.5. Scope</h3>
<p>This document will detail all technical aspects of the project, including technical decisions such as the architecture of the app and the technologies used. It will not cover design aspects or user experience considerations, as those decisions are addressed in the functional specification. Additionally, all test strategies and quality assurance details will be included in the separate test plan.</p>
<h2 id="2-requirements">2. Requirements</h2>
<h3 id="21-functional-requirements">2.1. Functional Requirements</h3>
<p><strong>Carbon Footprint Tracking:</strong></p>
<ul>
<li>Implement a background system that continuously runs within the app to detect the user’s transportation mode, even when the app is not actively in use.</li>
<li>Develop a tracking mechanism that records the time and distance traveled by the user in various transportation modes, including walking, cycling, public transport, and driving.</li>
</ul>
<p><strong>Real-Time Emission Calculation:</strong></p>
<ul>
<li>Create an algorithm that calculates the carbon footprint in real-time. The calculation should be based on the user’s speed and selected transportation mode, ensuring accurate emission data.</li>
<li>The algorithm should dynamically adjust its calculations based on the detected transportation mode and GPS data.</li>
</ul>
<p><strong>GPS Navigation and Transportation Mode Selection:</strong></p>
<ul>
<li>Integrate a navigation system using the Google Maps API, allowing users to select a destination and receive guided directions.</li>
<li>Provide functionality for users to choose their preferred mode of transportation and display real-time navigation and emission data accordingly.</li>
<li>Implement detailed and guided navigation, offering step-by-step directions and real-time updates throughout the journey.</li>
<li>Develop a system to mimic user movement, allowing for simulated navigation and testing of transportation modes and emission calculations.</li>
</ul>
<p><strong>User Interface and Core Application Features:</strong></p>
<ul>
<li>Develop the front-end components of the app, including:
<ul>
<li><strong>Sign-Up/Sign-In</strong>: User registration and authentication.</li>
<li><strong>Home</strong>: Dashboard displaying carbon footprint stats and relevant user information.</li>
<li><strong>GPS</strong>: Interface for navigation and transportation mode selection.</li>
<li><strong>Store</strong>: (Future version) In-app store for redeeming rewards.</li>
<li><strong>Settings</strong>: User account management, including modifying personal information and preferences.</li>
<li><strong>Profile</strong>: User profile displaying cumulative statistics and achievements.</li>
</ul>
</li>
</ul>
<p><strong>Account Management:</strong></p>
<ul>
<li>Implement a system for user account creation, login, and logout.</li>
<li>Provide features for modifying personal information, such as name, email, password, profile picture, and car information.</li>
</ul>
<p><strong>Database Management:</strong></p>
<ul>
<li>Design and manage a database with two primary collections:
<ul>
<li><strong>User Collection</strong>: Stores user-specific information, including account details.</li>
<li><strong>User Data Collection</strong>: Records data related to users' cars, transportation modes, and carbon emissions.</li>
</ul>
</li>
</ul>
<h3 id="22-non-functional-requirements">2.2. Non-Functional Requirements</h3>
<p><strong>Performance:</strong></p>
<ul>
<li>
<p>The app will utilize background operations and continuous location updates, which are battery-intensive features. The goal is to optimize battery usage and performance to align with industry standards of similar apps like Google Maps or Waze, ensuring that battery consumption remains within a comparable range of approximately 10% relative to those apps.</p>
</li>
<li>
<p>In terms of responsiveness, the app will adhere to the following benchmarks as outlined by Robert B. Miller in 1968:</p>
<ul>
<li><strong>0.1 seconds</strong>: The system should respond within 0.1 seconds to give the user the impression of an instant reaction, with no need for additional feedback.</li>
<li><strong>1 second</strong>: The system should maintain fluidity, with any delays between 0.1 and 1 second being noticeable but not disruptive to the user experience.</li>
<li><strong>10 seconds</strong>: The system should ensure that any operation taking up to 10 seconds provides progress feedback to keep the user engaged. Beyond this threshold, the user may lose focus and shift to other tasks.</li>
</ul>
</li>
</ul>
<p><strong>Security:</strong></p>
<ul>
<li>Implement secure user authentication using Google’s Firebase service, which provides built-in protection. Ensure that at no point within the app are Firebase credentials exposed, to protect against potential vulnerabilities.</li>
</ul>
<p><strong>Usability:</strong></p>
<ul>
<li>The app will adhere to the design outlined in the functional specification, which has been specifically crafted to keep users engaged and facilitate smooth workflow.</li>
</ul>
<h3 id="23-user-stories">2.3. User Stories</h3>
<ol>
<li><strong>As a user, I want to automatically track my transportation activities without manually starting the app, so I can accurately monitor my carbon emissions.</strong></li>
<li><strong>As a user, I want to receive real-time updates on my carbon footprint while navigating to a destination, so I can make environmentally conscious travel decisions.</strong></li>
<li><strong>As a user, I want to create an account and manage my personal information within the app, so I can securely use all features and update my profile as needed.</strong></li>
<li><strong>As a user, I want to see a detailed summary of my transportation habits and carbon emissions over time, so I can assess my environmental impact.</strong></li>
<li><strong>As a user, I want to select my preferred transportation mode and receive directions via the app, so I can efficiently reach my destination while minimizing my carbon footprint.</strong></li>
</ol>
<h2 id="3-technical-stack">3. Technical Stack</h2>
<h3 id="31-front-end-technologies">3.1. Front-End Technologies</h3>
<p>The project will be developed using <strong>React Native</strong>. React Native offers several advantages, including:</p>
<ul>
<li><strong>Cross-Platform Development</strong>: Write once, and run on both iOS and Android platforms, significantly reducing development time and effort.</li>
<li><strong>Performance</strong>: Near-native performance by using native components directly, which is crucial for mobile applications.</li>
<li><strong>Large Ecosystem and Community Support</strong>: Access to a wide range of libraries and tools, along with an active community for support.</li>
</ul>
<p><strong>Comparison with Flutter</strong>:</p>
<ul>
<li><strong>React Native</strong> uses JavaScript or TypeScript, which many developers are already familiar with, while <strong>Flutter</strong> uses Dart, a language that may require a learning curve for developers.</li>
<li><strong>React Native</strong> allows the use of native components and modules, whereas <strong>Flutter</strong> uses its own rendering engine, which can result in larger app sizes.</li>
<li><strong>React Native</strong> benefits from integration with a larger ecosystem of JavaScript libraries, while <strong>Flutter</strong> provides more customizable UI components and smoother animations.</li>
</ul>
<p>The app will be co-developed using the <strong>Expo</strong> framework, which offers additional advantages:</p>
<ul>
<li><strong>Simplified Development</strong>: Expo provides a set of tools and services that simplify the development process, a fast refresh feature, and built-in support for common features like push notifications and camera access.</li>
<li><strong>No Need for Native Code</strong>: With Expo, developers can build and deploy applications without writing native code, which speeds up the development process.</li>
<li><strong>Seamless Integration with React Native</strong>: Expo works seamlessly with React Native, allowing developers to start with Expo and &quot;eject&quot; to plain React Native if more customization is needed.</li>
</ul>
<p><strong>TypeScript vs. JavaScript</strong>:</p>
<ul>
<li><strong>JavaScript</strong> is a dynamically typed language, meaning that type-checking is done at runtime, which can lead to runtime errors if not carefully managed.</li>
<li><strong>TypeScript</strong> is a statically typed superset of JavaScript that allows developers to define types explicitly. This reduces bugs by catching type errors at compile time, improves code readability, and provides better tooling support, such as autocompletion and refactoring.</li>
</ul>
<p>Given these benefits, <strong>TypeScript</strong> was chosen for the project to ensure a more robust and maintainable codebase.</p>
<h3 id="32-back-end-technologies">3.2. Back-End Technologies</h3>
<p>The back-end will be managed using <strong>Firestore Database</strong> and <strong>Firestore Storage</strong>:</p>
<ul>
<li><strong>Firestore Database</strong> will store all user-related data. It is a NoSQL database that offers real-time data synchronization and scalability, making it ideal for mobile applications.</li>
<li><strong>Firestore Storage</strong> will handle the storage of user profile images. Profile images are not stored directly in the Firestore Database due to its limitations in handling large binary data. Instead, image URLs will be stored in the database, with the actual image files stored in Firestore Storage.</li>
</ul>
<p><strong>Database Structure</strong>:</p>
<ul>
<li>
<p><strong>Users Collection</strong>:</p>
<ul>
<li><strong>Document ID</strong>: The user’s ID.</li>
<li><strong>Fields</strong>: <code>email</code>, <code>profileImageUrl</code>, <code>userId</code>, <code>username</code>.</li>
</ul>
</li>
<li>
<p><strong>UserData Collection</strong>:</p>
<ul>
<li><strong>Document ID</strong>: The same as the user’s ID.</li>
<li><strong>Fields</strong>: <code>carSize</code>, <code>carType</code>, <code>totalCarbonFootprint</code>, <code>vehicleConsumption</code>, <code>userId</code>.</li>
</ul>
</li>
</ul>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/databaseStructure.png" alt="Database Structure"></p>
<h3 id="33-apis">3.3 APIs</h3>
<p>The choice to use Google Maps APIs is based on several key factors. Firstly, they are well-documented, which significantly streamlines development and reduces potential issues. Being provided by Google, ensures the assurance of long-term support and stability, minimizing the risk of sudden deprecation. Additionally, Google Maps APIs are highly efficient and reliable, making them an ideal choice for location-based services. Lastly, Google offers a $300 credit for these services, which is particularly beneficial for a school project without revenue, allowing for extensive testing and development without incurring costs.</p>
<p>The app will communicate with these Google Maps APIs:</p>
<ul>
<li><strong>Google Maps Place API</strong></li>
<li><strong>Google Maps Directions v2 API</strong></li>
<li><strong>Google Maps SDK for iOS</strong></li>
</ul>
<p>Their usage will be described in detail in their respective section.</p>
<h2 id="4-system-architecture">4. System Architecture</h2>
<h3 id="41-file-structure">4.1. File Structure</h3>
<pre class="hljs"><code><div>├── .env
├── .gitignore
├── .watchmanconfig
├── FirebaseConfig.ts
├── app.json
├── babel.config.js
├── global.css
├── metro.config.js
├── package-lock.json
├── package.json
├── tailwind.config.js
├── tsconfig.json
│
├── app/
│   ├── SignIn.tsx
│   ├── SignUp.tsx
│   ├── _layout.tsx
│   ├── index.tsx
│   ├── (tabs)/
│   │   ├── Challenges.tsx
│   │   ├── Gps.tsx
│   │   ├── Profile.tsx
│   │   ├── Store.tsx
│   │   ├── _layout.tsx
│   │   └── home/
│   │       ├── _layout.tsx
│   │       └── index.tsx
│   └── screens/
│       ├── InfoUser.tsx
│       ├── _layout.tsx
│
├── assets/
│   ├── icon.png
│   ├── animation/
│   ├── icons/
│   └── images/
│
├── components/
│   ├── index.ts
│   ├── common/
│   │   ├── CheckConnection.tsx
│   │   ├── CustomKeyboardView.tsx
│   │   ├── Loading.tsx
│   │   ├── LoadingMap.tsx
│   │   ├── ProfilImage.tsx
│   │   └── footer/
│   │       └── footer.style.ts
│   ├── home/
│   │   ├── activities/
│   │   │   ├── Activities.tsx
│   │   │   └── activities.style.ts
│   │   ├── dashboard/
│   │   │   ├── Dashboard.tsx
│   │   │   └── dashboard.style.ts
│   │   └── recommendation/
│   │       ├── Recommendation.tsx
│   │       └── recommendation.style.ts
│   ├── home/whitebackground/
│   │   └── whitebackground.style.ts
│   ├── map/
│   │   ├── Map.tsx
│   │   ├── map.style.ts
│   │   ├── carbonFootprintContainer/
│   │   │   ├── CarbonFootprintDisplay.tsx
│   │   │   └── carbonfootprintcontainer.style.ts
│   │   ├── footer/
│   │   │   ├── FooterMap.tsx
│   │   │   └── footer.style.ts
│   │   ├── instructions/
│   │   │   ├── Instructions.tsx
│   │   │   └── instructions.style.ts
│   │   └── modalTransportationChoice/
│   │       ├── TransportationModal.tsx
│   │       └── transportationmodal.style.ts
│   ├── profil/
│   │   ├── friendsnumber/
│   │   │   ├── FriendsNumber.tsx
│   │   │   └── friendsnumber.style.ts
│   │   ├── graphique/
│   │   │   ├── Graphique.tsx
│   │   │   └── graphique.style.ts
│   │   ├── nameandprofile/
│   │   │   ├── NameAndProfile.tsx
│   │   │   └── nameandprofile.style.ts
│   │   └── totaldata/
│   │       ├── TotalData.tsx
│   │       └── totaldata.style.ts
│   └── screens/infoUser/
│       ├── infoUser.style.ts
│       ├── editProfileModal/
│       │   ├── EditProfileComponent.tsx
│       │   └── editProfile.style.ts
│       ├── personalInfo/
│       │   └── PersonalInfo.tsx
│       └── policies/
│           ├── Policies.tsx
│           └── policies.style.ts
│   ├── store/
│   │   ├── popularcategories/
│   │   │   ├── PopularCategories.tsx
│   │   │   └── popularcategories.style.ts
│   │   ├── sales/
│   │   │   ├── Sales.tsx
│   │   │   └── sales.style.ts
│   │   └── spotlight/
│   │       ├── Spotlight.tsx
│   │       └── spotlight.style.ts
│
├── constants/
│   ├── data.ts
│   ├── icons.ts
│   ├── index.ts
│   └── theme.ts
│
├── context/
│   └── AuthContext.tsx
│
├── ios/
│
└── utils/
    ├── CalculateCarbonFootprint.ts
    ├── MapUtils.ts
    ├── UploadImageToFirebase.ts
    └── UploadModal.tsx
</div></code></pre>
<h3 id="42-file-and-directory-purposes">4.2. File and Directory Purposes</h3>
<p>//TODO: Add descriptions for each file and directory</p>
<ul>
<li>
<p><strong><code>app/</code></strong>: Contains all the principal pages of the app. Pages outside of tabs (e.g., <code>SignIn.tsx</code>, <code>SignUp.tsx</code>) are accessible without authentication, while pages within the tabs (e.g., <code>Challenges.tsx</code>, <code>Gps.tsx</code>) are protected by the <code>AuthContext</code> and require the user to be logged in.</p>
</li>
<li>
<p><strong><code>assets/</code></strong>: Stores all the static assets used in the app, including images, icons, and animations. These are used to provide visual content within the app.</p>
</li>
<li>
<p><strong><code>constants/</code></strong>: Contains data that should remain constant throughout the app, such as paths to icons, theme settings, and standard data related to carbon emissions. These constants help ensure consistency across the app.</p>
</li>
<li>
<p><strong><code>context/</code></strong>: Contains the <code>AuthContext.tsx</code> file, which is responsible for managing the authentication state, including login and logout functionality.</p>
</li>
<li>
<p><strong><code>ios/</code></strong>: Contains all the files related to building the iOS version of the app. This includes configuration files, project settings, and other necessary components for compiling the app for iOS devices.</p>
</li>
</ul>
<h3 id="43-step-by-step-project-setup-and-development">4.3. Step-by-Step Project Setup and Development</h3>
<h4 id="431-create-the-project">4.3.1 Create the Project</h4>
<p>To start developing the app, the first step is to create a new project using Expo.
<strong>How to Create an Expo Project</strong>:</p>
<ol>
<li>
<p><strong>Install Expo CLI</strong>: If you haven't already installed Expo CLI, you can do so by running the following command in your terminal:</p>
<pre class="hljs"><code><div>npm install -g expo-cli
</div></code></pre>
</li>
<li>
<p><strong>Create a New Project</strong>: Once Expo CLI is installed, you can create a new project by running:</p>
<pre class="hljs"><code><div>expo init EcoGo
</div></code></pre>
<p>During this process, you'll be prompted to choose a template. Select the &quot;blank (TypeScript)&quot; template to start with a basic setup that includes TypeScript support.</p>
</li>
<li>
<p><strong>Navigate to the Project Directory</strong>:</p>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> EcoGo
</div></code></pre>
</li>
</ol>
<h4 id="432-install-npm-and-set-up-typescript">4.3.2. Install npm and Set Up TypeScript</h4>
<p><strong>Install npm</strong>:</p>
<p>npm (Node Package Manager) will be used to manage dependencies for the project. It is installed automatically when you install Node.js. If you need to install npm separately, you can do so by following the instructions on the <a href="https://www.npmjs.com/get-npm">official npm website</a>.</p>
<h4 id="433-front-end">4.3.3. Front End</h4>
<p>The front-end development of the app will be the most time-consuming part of the project. It involves creating all the pages and components as per the design specifications provided in the functional requirements.</p>
<p><strong>Important Code Principles</strong>:</p>
<ul>
<li><strong>Folder Naming</strong>: Folder names should be in <strong>lowercase</strong>.</li>
<li><strong>Page and Component Naming</strong>: Page and component names should follow the <strong>PascalCase</strong> convention (e.g., <code>SignIn.tsx</code>, <code>SignUp.tsx</code>).</li>
<li><strong>Function Naming</strong>: Function names should use <strong>camelCase</strong> (e.g., <code>handleLogin</code>).</li>
<li><strong>Constant Naming</strong>: Constants should be named using <strong>UPPERCASE</strong> (e.g., <code>API_KEY</code>).</li>
</ul>
<p><strong>Developing Pages</strong>:</p>
<p>Each page in the <code>app</code> folder should be developed according to the design. For example, the pages within the <code>(tabs)</code> folder are protected by the <code>AuthContext</code> and should contain the necessary components. Here is an example of how a page should be structured:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { View, ScrollView } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> Dashboard <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/home/dashboard/Dashboard'</span>;
<span class="hljs-keyword">import</span> Activities <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/home/activities/Activities'</span>;
<span class="hljs-keyword">import</span> Recommendation <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/home/recommendation/Recommendation'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Home</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    &lt;View&gt;
      &lt;ScrollView&gt;
        &lt;Dashboard /&gt;
        &lt;Activities /&gt;
        &lt;Recommendation /&gt;
      &lt;<span class="hljs-regexp">/ScrollView&gt;
    &lt;/</span>View&gt;
  );
}
</div></code></pre>
<p>In this example:</p>
<ul>
<li>The <strong>Home</strong> page is composed of multiple components (<code>Dashboard</code>, <code>Activities</code>, <code>Recommendation</code>).</li>
<li>Each component should be developed in its respective folder inside the <code>components</code> directory.</li>
</ul>
<h4 id="434-authentication-and-user-management">4.3.4 Authentication and User Management</h4>
<p>The authentication and user management system in the app relies on Firebase services to handle user sign-up, sign-in, and data management. The following components are involved in this process:</p>
<h5 id="%E2%9E%AD-authentication-context-authcontexttsx">➭ Authentication Context (<code>AuthContext.tsx</code>)</h5>
<p><code>AuthContext</code> serves as the central point for managing user authentication and profile data. It interacts with Firebase services to handle user sign-up, sign-in, and session management. Additionally, it provides methods for updating user data and managing the authentication state across the app.</p>
<p><strong>Functions and Their Purpose</strong></p>
<ol>
<li>
<p><strong><code>login(email: string, password: string)</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Authenticates a user using their email and password.</li>
<li><strong>Implementation</strong>: Uses Firebase's <code>signInWithEmailAndPassword</code> function to log the user in. Upon successful login, it updates the global authentication state. Handles errors such as invalid email, user not found, and incorrect password.</li>
</ul>
</li>
<li>
<p><strong><code>logout()</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Logs the user out of the app.</li>
<li><strong>Implementation</strong>: Uses Firebase's <code>signOut</code> function to end the user's session. The global authentication state is reset.</li>
</ul>
</li>
<li>
<p><strong><code>register(email: string, password: string, username: string, image: any, userData: any)</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Registers a new user and sets up their profile in the database.</li>
<li><strong>Implementation</strong>:
<ul>
<li>Creates a new user with Firebase Authentication using <code>createUserWithEmailAndPassword</code>.</li>
<li>Uploads the user's profile image to Firebase Storage and retrieves the image URL.</li>
<li>Stores the user’s profile data in the <code>users</code> collection and additional data (like car type and size) in the <code>userData</code> collection in Firestore.</li>
<li>Manages errors such as invalid email format or an email already in use.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><code>updateUser(newUserData: Partial&lt;User&gt;)</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Updates the current user's profile information in Firestore.</li>
<li><strong>Implementation</strong>:
<ul>
<li>Modifies the relevant fields in both <code>users</code> and <code>userData</code> collections based on the input provided.</li>
<li>Ensures the global state is updated to reflect the latest changes.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><code>updateUserData(userId: string)</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Fetches and updates the user’s data from Firestore after authentication.</li>
<li><strong>Implementation</strong>:
<ul>
<li>Retrieves documents from the <code>users</code> and <code>userData</code> collections using <code>getDoc</code>.</li>
<li>Updates the global state with the retrieved user data.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><code>onAuthStateChanged</code></strong>:</p>
<ul>
<li><strong>Purpose</strong>: Listens for changes in the user’s authentication state.</li>
<li><strong>Implementation</strong>:
<ul>
<li>Automatically updates the app’s state when the user signs in or out, ensuring the correct data is loaded or cleared as needed.</li>
<li>This function is set up in the <code>useEffect</code> hook to monitor authentication state changes and update the <code>AuthContext</code> accordingly.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>Error Handling</strong></p>
<p><strong>Login Errors</strong></p>
<ul>
<li>
<p><strong>Invalid Email</strong>:</p>
<ul>
<li>If the email format provided by the user is incorrect, the <code>login</code> function catches this error, which is returned by Firebase as <code>auth/invalid-email</code>. The user is then alerted with the message: <code>&quot;Invalid email format. Please check your email and try again.&quot;</code></li>
</ul>
</li>
<li>
<p><strong>User Not Found</strong>:</p>
<ul>
<li>If the email entered by the user does not correspond to any registered account, Firebase returns an <code>auth/user-not-found</code> error. The application will display the following message: <code>&quot;No account found with this email. Please check your email or sign up for a new account.&quot;</code></li>
</ul>
</li>
<li>
<p><strong>Wrong Password</strong>:</p>
<ul>
<li>If the password entered is incorrect, Firebase returns an <code>auth/wrong-password</code> error. The user is informed with this message: <code>&quot;Incorrect password. Please try again or reset your password if you've forgotten it.&quot;</code></li>
</ul>
</li>
</ul>
<p><strong>Registration Errors</strong></p>
<ul>
<li>
<p><strong>Invalid Email</strong>:</p>
<ul>
<li>During the registration process, if the email format is incorrect, the <code>register</code> function captures this <code>auth/invalid-email</code> error. The user is notified with the message: <code>&quot;Invalid email format. Please enter a valid email address.&quot;</code></li>
</ul>
</li>
<li>
<p><strong>Email Already in Use</strong>:</p>
<ul>
<li>If the email provided during registration is already associated with an existing account, Firebase triggers an <code>auth/email-already-in-use</code> error. The application will return this message to the user: <code>&quot;This email is already in use. Please use a different email or sign in to your existing account.&quot;</code></li>
</ul>
</li>
</ul>
<p><strong>Data Retrieval and Update Errors</strong></p>
<ul>
<li>
<p><strong>Data Retrieval</strong>:</p>
<ul>
<li>If there is an issue retrieving user data from Firestore (e.g., due to network issues or missing documents), the <code>updateUserData</code> function will log the error and notify the user with a generic message such as: <code>&quot;Error fetching your data. Please check your connection and try again.&quot;</code></li>
</ul>
</li>
<li>
<p><strong>Data Update</strong>:</p>
<ul>
<li>When updating user data in Firestore, if an error occurs (e.g., permission issues or network errors), the <code>updateUser</code> function logs the error and provides feedback to the user. The message could be: <code>&quot;Failed to update your profile. Please try again later.&quot;</code></li>
<li>If the issue is related to a specific field (e.g., a required field is missing), the error handling will inform the user specifically: <code>&quot;Failed to update your profile. Please ensure all required fields are filled correctly.&quot;</code></li>
</ul>
</li>
</ul>
<p><strong>Data Flow</strong></p>
<ul>
<li>
<p><strong>User Authentication</strong>:</p>
<ul>
<li>When a user logs in or registers, Firebase Authentication creates or validates the user's credentials. If successful, a session token is generated, and the app uses this token to manage the user's session.</li>
<li>The user's data is then fetched from Firestore, updating the <code>AuthContext</code> state with the user’s profile and additional data.</li>
</ul>
</li>
<li>
<p><strong>Data Storage</strong>:</p>
<ul>
<li><strong>Profile Image</strong>: Uploaded to Firebase Storage and the URL is stored in the <code>users</code> collection.</li>
<li><strong>User Data</strong>: Stored in two Firestore collections:
<ul>
<li><code>users</code>: Contains basic user information such as username, email, and profile image URL.</li>
<li><code>userData</code>: Stores additional information like car type, car size, consumption, and carbon footprint emission.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Session Management</strong>:</p>
<ul>
<li>The <code>onAuthStateChanged</code> function ensures that the app's state reflects the current authentication status. When the user logs out, the session is terminated, and the user data is cleared from the app's state.</li>
</ul>
</li>
<li>
<p><strong>Firebase Operations</strong>:</p>
<ul>
<li><strong>Sign In</strong>: <code>signInWithEmailAndPassword</code> is used for authenticating users.</li>
<li><strong>Sign Up</strong>: <code>createUserWithEmailAndPassword</code> is used for creating new users, followed by Firestore operations to store additional profile data.</li>
<li><strong>User Data Update</strong>: <code>updateDoc</code> is used to modify user documents in Firestore, while <code>setDoc</code> is used for initial document creation.</li>
<li><strong>Profile Image Handling</strong>: Images are uploaded using Firebase Storage APIs, and their URLs are retrieved and stored in Firestore.</li>
</ul>
</li>
</ul>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/authContextFlow.png" alt="Authentication Context"></p>
<h5 id="%E2%9E%AD-sign-in-page-signintsx">➭ Sign-In Page (<code>SignIn.tsx</code>)</h5>
<p><strong>Key Parts</strong></p>
<ol>
<li>
<p><strong>State Management</strong></p>
<ul>
<li><strong>Purpose</strong>: useState allows the component to track changes and trigger a re-render when this state changes. This is useful in our case for updating the UI dynamically, such as showing a loading spinner while the login process is in progress and hiding it once the process is complete.</li>
<li><strong><code>loading</code></strong>: We need to implement state management to handle the loading state, which will indicate when the login process is in progress.</li>
</ul>
</li>
<li>
<p><strong>References</strong></p>
<ul>
<li><strong>Purpose</strong>: 	useRef allows to store and update values without causing the component to re-render. Unlike useState, which triggers a re-render every time the state changes, useRef provides a mutable reference that persists across renders without affecting the UI. This is particularly useful for storing the current values of the email and password fields, which do not need to trigger a re-render of the component every time the user types.</li>
<li><strong><code>email</code></strong>: Stores the email entered by the user.</li>
<li><strong><code>password</code></strong>: Stores the password entered by the user.</li>
</ul>
</li>
<li>
<p><strong><code>handleLogin()</code> Function</strong></p>
<ul>
<li><strong>Purpose</strong>: Handles the login process when the user attempts to sign in.</li>
<li><strong>Implementation Steps</strong>:
<ol>
<li>Checks if both the email and password fields are filled. If not, display an alert message: <code>&quot;Error: Please fill all the fields&quot;</code>.</li>
<li>Indicate that the login process is ongoing.</li>
<li>Calls the <code>login</code> function from <code>AuthContext</code>, passing the email and password.</li>
<li>If the login fails, display an alert with the error message returned from the <code>login</code> function (e.g., <code>&quot;Sign In Error: Invalid email or password&quot;</code>).</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>Input Fields</strong></p>
<ul>
<li><strong>Email Input</strong>:
<ul>
<li>Captures the user's email address and updates the ref value.</li>
</ul>
</li>
<li><strong>Password Input</strong>:
<ul>
<li>Captures the user's password and updates the ref value.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Sign In Button</strong></p>
<ul>
<li><strong>Purpose</strong>: Triggers the <code>handleLogin</code> function when pressed.</li>
<li><strong>Loading State</strong>: Displays a loading spinner if <code>loading</code> is <code>true</code>, otherwise shows the &quot;Sign in&quot; button.</li>
</ul>
</li>
</ol>
<p><strong>Data Management</strong></p>
<ul>
<li>
<p><strong>Email and Password Handling</strong>:</p>
<ul>
<li>The email and password are stored.</li>
<li>Upon pressing the sign-in button, these values are passed to the <code>login</code> function in the <code>AuthContext</code>.</li>
</ul>
</li>
<li>
<p><strong>Login Function</strong>:</p>
<ul>
<li>The <code>login</code> function in <code>AuthContext</code> interacts with Firebase Authentication to validate the provided credentials. It returns a response indicating success or failure.</li>
<li>Based on the response, the <code>SignIn</code> component provides feedback to the user, either transitioning to the next screen (on success) or displaying an error message.</li>
</ul>
</li>
<li>
<p><strong>Error Handling</strong>:</p>
<ul>
<li>The component handles missing input fields by displaying an alert. If Firebase returns an error during the login attempt, it is caught and displayed to the user.</li>
</ul>
</li>
</ul>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/signInFlow.png" alt="SignIn Flow"></p>
<h5 id="%E2%9E%AD-sign-up-component-signuptsx">➭ Sign-Up Component (<code>SignUp.tsx</code>)</h5>
<ol>
<li>
<p><strong>State Management</strong>
Use local state management to handle registration progress, image selection, car details input, and password validation.</p>
</li>
<li>
<p><strong>References for Input Fields</strong>
Use ref hooks to store the user's email, password, confirm password, and username.</p>
</li>
</ol>
<p><strong>Function Implementations</strong></p>
<ul>
<li><strong><code>handleRegister()</code>:</strong>
<ul>
<li><strong>Purpose</strong>: To handle the user registration process.</li>
<li><strong>Implementation Steps</strong>:
<ol>
<li>Validate that all required fields are filled. If any are missing, show an error alert.</li>
<li>Check if the password and confirm password fields match. If not exit the function.</li>
<li>Show the loading indicator.</li>
<li>Construct the <code>userData</code> object, including car type, car size, and consumption (if the car is not electric).</li>
<li>Call the <code>register</code> function from the authentication context, passing the necessary parameters.</li>
<li>Handle the response from the <code>register</code> function. If registration fails, show an alert with the error message.</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><strong>Data Flow</strong></p>
<ol>
<li>
<p><strong>Input Data Collection:</strong></p>
<ul>
<li>The email, password, confirm password, and username fields collect data via <code>useRef</code>. The car type, car size, and consumption fields, as well as the profile image, are managed via <code>useState</code>.</li>
</ul>
</li>
<li>
<p><strong>Registration Process:</strong></p>
<ul>
<li>When the user clicks the &quot;Sign Up&quot; button, the <code>handleRegister</code> function validates the input, manages the state during the process (loading indicator), and interacts with the authentication context to register the user in Firebase.</li>
</ul>
</li>
<li>
<p><strong>User Feedback:</strong></p>
<ul>
<li>Error handling and feedback are provided via alerts and UI updates, such as showing error messages or hiding the loading indicator upon completion.</li>
</ul>
</li>
</ol>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/signUpFlow.png" alt="SignUp Flow"></p>
<h4 id="435-gps-navigation-and-transportation-mode-selection">4.3.5 GPS Navigation and Transportation Mode Selection</h4>
<p>The navigation system is one of the most complex tasks in the application. Below are the steps required to build this system:</p>
<h5 id="%E2%9E%AD-install-react-native-maps">➭ Install <code>react-native-maps</code></h5>
<ul>
<li>Install <code>react-native-maps</code> to use Google Maps within the app. Follow the installation guide <a href="https://github.com/react-native-maps/react-native-maps/blob/master/docs/installation.md">here</a>.</li>
</ul>
<h5 id="%E2%9E%AD-google-maps-api-setup">➭ Google Maps API Setup</h5>
<ul>
<li><strong>Create a Billing Account</strong>: Set up a billing account with Google Cloud to receive the $300 free credit.</li>
<li><strong>Generate Google Maps API Key</strong>: Enable the following APIs on the generated API key:
<ul>
<li><strong>Google Maps Place API</strong></li>
<li><strong>Google Maps Directions v2 API</strong></li>
<li><strong>Google Maps SDK for iOS</strong></li>
</ul>
</li>
</ul>
<h5 id="%E2%9E%ADdisplay-the-map">➭Display the Map</h5>
<ul>
<li><strong>Map Initialization</strong>: Use the <code>MapView</code> component from <code>react-native-maps</code> to display Google Maps within the app. Ensure to set the <code>provider</code> prop to <code>PROVIDER_GOOGLE</code> to use Google Maps instead of Apple Maps.</li>
</ul>
<h5 id="%E2%9E%AD-fetch-user-location">➭ Fetch User Location</h5>
<p>The app will first request the user’s permission to access their location using the <code>expo-location</code> library. Once permission is granted, it will retrieve the user's current location using <code>Location.getCurrentPositionAsync</code> from the <code>expo-location</code> library. After obtaining the location, the app will display a marker on the map that corresponds to the user's current position.</p>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/fetchLocation.png" alt="Fetch User Location"></p>
<h5 id="%E2%9E%AD-get-destination-input">➭ Get Destination Input</h5>
<p>The app will utilize the <strong>Google Maps Places API</strong> to provide autocomplete suggestions based on user input and to fetch detailed information about selected places. When the user inputs a destination, the app will send a request to the Google Maps Places API to retrieve suggestions. The response from the API will look like this:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"predictions"</span>: [
    {
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Eiffel Tower, Paris, France"</span>,
      <span class="hljs-attr">"structured_formatting"</span>: {
        <span class="hljs-attr">"main_text"</span>: <span class="hljs-string">"Eiffel Tower"</span>,
        <span class="hljs-attr">"secondary_text"</span>: <span class="hljs-string">"Paris, France"</span>
      },
      <span class="hljs-attr">"place_id"</span>: <span class="hljs-string">"ChIJLU7jZClu5kcR4PcOOO6p3I0"</span>,
      <span class="hljs-attr">"terms"</span>: [
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"Eiffel Tower"</span> },
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"Paris"</span> },
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"France"</span> }
      ],
      <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"tourist_attraction"</span>, <span class="hljs-string">"point_of_interest"</span>, <span class="hljs-string">"establishment"</span>]
    },
    {
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Eiffel Tower Restaurant, Las Vegas, NV, USA"</span>,
      <span class="hljs-attr">"structured_formatting"</span>: {
        <span class="hljs-attr">"main_text"</span>: <span class="hljs-string">"Eiffel Tower Restaurant"</span>,
        <span class="hljs-attr">"secondary_text"</span>: <span class="hljs-string">"Las Vegas, NV, USA"</span>
      },
      <span class="hljs-attr">"place_id"</span>: <span class="hljs-string">"ChIJ7bDDEQnEyIAR7_Cf-Lw1GhQ"</span>,
      <span class="hljs-attr">"terms"</span>: [
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"Eiffel Tower Restaurant"</span> },
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"Las Vegas"</span> },
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"NV"</span> },
        { <span class="hljs-attr">"value"</span>: <span class="hljs-string">"USA"</span> }
      ],
      <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"restaurant"</span>, <span class="hljs-string">"food"</span>, <span class="hljs-string">"point_of_interest"</span>, <span class="hljs-string">"establishment"</span>]
    }
  ],
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"OK"</span>
}
</div></code></pre>
<p>Once the user selects a destination, another request will be sent to the Places API to fetch detailed information, including the latitude and longitude of the selected place. The response will contain the following data:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: {
    <span class="hljs-attr">"address_components"</span>: [
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"Eiffel Tower"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"Eiffel Tower"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"premise"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"Champ de Mars"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"Champ de Mars"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"route"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"7th arrondissement"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"7th arrondissement"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"sublocality_level_1"</span>, <span class="hljs-string">"sublocality"</span>, <span class="hljs-string">"political"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"Paris"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"Paris"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"locality"</span>, <span class="hljs-string">"political"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"Île-de-France"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"IDF"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"administrative_area_level_1"</span>, <span class="hljs-string">"political"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"France"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"FR"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"country"</span>, <span class="hljs-string">"political"</span>]
      },
      {
        <span class="hljs-attr">"long_name"</span>: <span class="hljs-string">"75007"</span>,
        <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"75007"</span>,
        <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"postal_code"</span>]
      }
    ],
    <span class="hljs-attr">"formatted_address"</span>: <span class="hljs-string">"Champ de Mars, 5 Avenue Anatole France, 75007 Paris, France"</span>,
    <span class="hljs-attr">"geometry"</span>: {
      <span class="hljs-attr">"location"</span>: {
        <span class="hljs-attr">"lat"</span>: <span class="hljs-number">48.8583701</span>,
        <span class="hljs-attr">"lng"</span>: <span class="hljs-number">2.2944813</span>
      },
      <span class="hljs-attr">"viewport"</span>: {
        <span class="hljs-attr">"northeast"</span>: {
          <span class="hljs-attr">"lat"</span>: <span class="hljs-number">48.8597190802915</span>,
          <span class="hljs-attr">"lng"</span>: <span class="hljs-number">2.295830280291502</span>
        },
        <span class="hljs-attr">"southwest"</span>: {
          <span class="hljs-attr">"lat"</span>: <span class="hljs-number">48.8570211197085</span>,
          <span class="hljs-attr">"lng"</span>: <span class="hljs-number">2.293132319708498</span>
        }
      }
    },
    <span class="hljs-attr">"place_id"</span>: <span class="hljs-string">"ChIJLU7jZClu5kcR4PcOOO6p3I0"</span>,
    <span class="hljs-attr">"types"</span>: [<span class="hljs-string">"tourist_attraction"</span>, <span class="hljs-string">"point_of_interest"</span>, <span class="hljs-string">"establishment"</span>]
  },
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"OK"</span>
}
</div></code></pre>
<p>This geolocation data will be crucial for calculating routes in the next part.</p>
<p><strong>Key Functionalities</strong></p>
<ol>
<li><strong>Fetching Place Suggestions</strong>
<ul>
<li><strong><code>fetchSuggestions</code> Function</strong>:
<ul>
<li><strong>Purpose</strong>: Fetches place suggestions from the Google Maps Places Autocomplete API based on user input.</li>
<li><strong>How It Works</strong>:
<ol>
<li>The user begins typing a destination in the search input field.</li>
<li>The app sends a request to the Google Maps Places API, including the user's current location and input text.</li>
<li>The API returns a list of place suggestions, which are sorted to favor places within the user's current country.</li>
<li>The sorted suggestions are stored and displayed in a list below the input field.</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/inputLocation.png" alt="Fetch Place Suggestions"></p>
<ol start="2">
<li><strong>Handling Place Selection</strong>
<ul>
<li><strong><code>handleSuggestionPress</code> Function</strong>:
<ul>
<li><strong>Purpose</strong>: Handles the event when a user selects a place from the suggestions list.</li>
<li><strong>How It Works</strong>:
<ol>
<li>The user selects a suggestion from the list.</li>
<li>The app sends a request to the Google Maps Places Details API using the place_id of the selected suggestion.</li>
<li>The API returns detailed information, including the latitude and longitude of the selected place.</li>
<li>Once the destination is set, the app triggers the funtion to calculate the route (described in the next part).</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/suggestion.png" alt="Handle Place Selection"></p>
<ol start="3">
<li>
<p><strong>Sequence of Operations</strong></p>
<ol>
<li>The user begins typing a destination.</li>
<li>The app fetches and displays suggestions from the Google Maps Places API.</li>
<li>The user selects a place, triggering the app to fetch detailed location data.</li>
<li>The selected destination is used to calculate possible routes, which are then presented to the user.</li>
</ol>
</li>
<li>
<p><strong>How the request are sent</strong></p>
<ul>
<li><strong>Fetch Suggestions Request</strong>:
<ul>
<li><strong>URL</strong>: <code>https://maps.googleapis.com/maps/api/place/autocomplete/json</code></li>
<li><strong>Parameters</strong>: <code>input</code> (user input), <code>location</code> (user's current location), <code>key</code> (Google Maps API key).</li>
</ul>
</li>
<li><strong>Fetch Details Request</strong>:
<ul>
<li><strong>URL</strong>: <code>https://maps.googleapis.com/maps/api/place/details/json</code></li>
<li><strong>Parameters</strong>: <code>place_id</code> (selected place ID), <code>key</code> (Google Maps API key).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Schema of how many requests are sent</strong></p>
</li>
</ol>
<p><img src="file:///Users/thomasplanchard/Documents/moonshotProject/Docs/Technical/Img/requestSchema.png" alt="Schema"></p>
<h4 id="6-route-calculation-and-navigation">6. <strong>Route Calculation and Navigation</strong></h4>
<ul>
<li><strong>Calculate Route</strong>: Implement a function to calculate the route from the user's current location to the selected destination using the Google Maps Directions API.</li>
<li><strong>Store Route and Steps</strong>: Store the calculated route coordinates and navigation steps in the state. This data will be used for both navigation and real-time updates.</li>
</ul>
<h4 id="7-real-time-navigation-and-instructions">7. <strong>Real-Time Navigation and Instructions</strong></h4>
<ul>
<li><strong>Display Route on Map</strong>: Use the <code>Polyline</code> component to display the calculated route on the map.</li>
<li><strong>Step-by-Step Navigation</strong>: Implement a function to provide real-time navigation instructions as the user follows the route.</li>
<li><strong>Simulated Navigation</strong>: Develop a system to simulate user movement along the route for testing purposes. This can be achieved by updating the user's location at regular intervals to mimic movement.</li>
</ul>
<p>By following these steps, the navigation system will allow users to select a destination, receive real-time guided directions, and visualize their route on a map, all while tracking carbon emissions based on their selected transportation mode.</p>
<ul>
<li>Integrate a navigation system using the Google Maps API, allowing users to select a destination and receive guided directions.</li>
<li>Provide functionality for users to choose their preferred mode of transportation and display real-time navigation and emission data accordingly.</li>
<li>Implement detailed and guided navigation, offering step-by-step directions and real-time updates throughout the journey.</li>
<li>Develop a system to mimic user movement, allowing for simulated navigation and testing of transportation modes and emission calculations.</li>
</ul>
<ol>
<li>
<p>System Architecture</p>
<p>•	High-Level Architecture: Overview of the system’s architecture, including diagrams.
•	Component Description: Detailed description of each major component and its responsibilities.
•	Data Flow: How data moves through the system.</p>
</li>
<li>
<p>Implementation Plan</p>
<p>•	Development Strategy: Agile, Scrum, or other methodologies to be used.
•	Milestones and Phases: Breakdown of the project into phases with timelines.
•	Task Allocation: Who will be responsible for what tasks.</p>
</li>
<li>
<p>Deployment Plan</p>
<p>•	Environment Setup: Description of development, staging, and production environments.
•	Deployment Strategy: Steps and processes for deploying the app.
•	Rollback Plan: Steps to revert to a previous state in case of issues.</p>
</li>
<li>
<p>Maintenance and Support</p>
<p>•	Post-Launch Support: How issues will be handled post-launch.
•	Maintenance Plan: Regular updates, bug fixes, and improvements.</p>
</li>
</ol>

</body>
</html>
